---
title: "Section 13: Text Data and Strings"
author: "Matt Higham"
format: 
  html:
    embed-resources: true
---

## Section 14.2: `stringr`

```{r}
library(here)
library(tidyverse)
med_djok_df <- read_csv(here("data/med_djok.csv"))
med_djok_df

med_djok_df |>
  mutate(serve_location = case_when(str_detect(point, pattern = "^4") ~ "wide",
                                    str_detect(point, pattern = "^5") ~ "body",
                                    str_detect(point, pattern = "^6") ~ "down the center")) |>
  relocate(serve_location)
```

## Class Exercises

Class Exercise 1

```{r}
## install.packages("schrute")
library(schrute)
library(tidyverse)

schrute::theoffice
```

```{r}
library(tidytext)
office_unnest <- theoffice |>
  unnest_tokens(output = "word", input = "text")
office_unnest

## stop_words gets loaded in when you load
## in the tidytext package
office_stop <- anti_join(office_unnest, stop_words,
                          by = join_by(word == word))

office_sum <- office_stop |> 
  filter(character == "Michael") |>
  group_by(word) |>
  summarise(n = n()) |>
  arrange(desc(n)) |>
  slice(1:20) |>
  mutate(word = fct_reorder(word, n))

ggplot(data = office_sum, aes(x = word, y = n)) +
  geom_segment(aes(xend = word, y = 0, yend = n)) +
  geom_point() +
  theme_minimal() +
  coord_flip()

```